# Manager Endpoints

paths:
  # Fields
  /api/manager/fields:
    get:
      tags:
        - Manager - Fields
      summary: List manager's fields
      description: Get all fields owned by the authenticated manager
      security:
        - bearerAuth: []
      responses:
        200:
          description: List of manager's fields
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Field'
        403:
          description: Not a manager
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    post:
      tags:
        - Manager - Fields
      summary: Create a new field
      description: Create a new field for the manager
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - address
                - basePricePerHour
              properties:
                name:
                  type: string
                address:
                  type: string
                description:
                  type: string
                amenities:
                  type: object
                basePricePerHour:
                  type: number
      responses:
        201:
          description: Field created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  field:
                    $ref: '#/components/schemas/Field'

  /api/manager/fields/{id}:
    get:
      tags:
        - Manager - Fields
      summary: Get a specific field
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Field details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Field'
        404:
          description: Field not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    put:
      tags:
        - Manager - Fields
      summary: Update a field
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                address:
                  type: string
                description:
                  type: string
                amenities:
                  type: object
                basePricePerHour:
                  type: number
      responses:
        200:
          description: Field updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Field'

    delete:
      tags:
        - Manager - Fields
      summary: Delete a field (soft delete)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Field deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string

  # Promotions
  /api/manager/fields/{fieldId}/promotions:
    get:
      tags:
        - Manager - Promotions
      summary: List promotions for a field
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: fieldId
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: List of promotions
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Promotion'

    post:
      tags:
        - Manager - Promotions
      summary: Create a promotion
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: fieldId
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - discountType
                - discountValue
                - startDate
                - endDate
              properties:
                title:
                  type: string
                description:
                  type: string
                discountType:
                  type: string
                  enum: [percentage, fixed_amount]
                discountValue:
                  type: number
                startDate:
                  type: string
                  format: date-time
                endDate:
                  type: string
                  format: date-time
      responses:
        201:
          description: Promotion created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Promotion'

  # Products
  /api/manager/fields/{fieldId}/products:
    get:
      tags:
        - Manager - Products
      summary: List products for a field
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: fieldId
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: List of products
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Product'

    post:
      tags:
        - Manager - Products
      summary: Create a product
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: fieldId
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - price
                - category
              properties:
                name:
                  type: string
                description:
                  type: string
                price:
                  type: number
                imageUrl:
                  type: string
                category:
                  type: string
                  enum: [bebida, snack, equipo, promocion]
      responses:
        201:
          description: Product created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'

  # Stats
  /api/manager/stats:
    get:
      tags:
        - Manager - Stats
      summary: Get dashboard statistics
      description: Get revenue, bookings, and customer statistics
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: period
          schema:
            type: string
            enum: [today, week, month, all]
            default: today
      responses:
        200:
          description: Dashboard statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DashboardStats'

  /api/manager/stats/chart:
    get:
      tags:
        - Manager - Stats
      summary: Get chart data
      description: Get revenue data for charts
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: period
          schema:
            type: string
            enum: [week, month, year]
            default: week
      responses:
        200:
          description: Chart data
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    date:
                      type: string
                    revenue:
                      type: number
                    bookings:
                      type: integer

  # Bookings
  /api/manager/bookings:
    get:
      tags:
        - Manager - Fields
      summary: List all bookings for manager's fields
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: status
          schema:
            type: string
            enum: [pending, confirmed, cancelled]
        - in: query
          name: fieldId
          schema:
            type: string
            format: uuid
        - in: query
          name: from
          schema:
            type: string
            format: date-time
        - in: query
          name: to
          schema:
            type: string
            format: date-time
      responses:
        200:
          description: List of bookings
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Booking'
